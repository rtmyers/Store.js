"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const constants_1 = require("../constants");
const decorators_1 = require("../decorators");
const model_properties_accessor_1 = require("../services/model-properties-accessor");
const type_helpers_utils_1 = require("./type-helpers.utils");
const modelPropertiesAccessor = new model_properties_accessor_1.ModelPropertiesAccessor();
function PartialType(classRef) {
    const fields = modelPropertiesAccessor.getModelProperties(classRef.prototype);
    class PartialTypeClass {
    }
    type_helpers_utils_1.inheritValidationMetadata(classRef, PartialTypeClass);
    type_helpers_utils_1.inheritTransformationMetadata(classRef, PartialTypeClass);
    fields.forEach((key) => {
        const metadata = Reflect.getMetadata(constants_1.DECORATORS.API_MODEL_PROPERTIES, classRef.prototype, key) || {};
        const decoratorFactory = decorators_1.ApiProperty(Object.assign(Object.assign({}, metadata), { required: false }));
        decoratorFactory(PartialTypeClass.prototype, key);
        type_helpers_utils_1.applyIsOptionalDecorator(PartialTypeClass, key);
    });
    return PartialTypeClass;
}
exports.PartialType = PartialType;
